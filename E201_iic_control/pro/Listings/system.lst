C51 COMPILER V9.59.0.0   SYSTEM                                                            12/01/2018 16:13:00 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE SYSTEM
OBJECT MODULE PLACED IN .\Objects\system.obj
COMPILER INVOKED BY: E:\MDK\C51\BIN\C51.EXE ..\user\system.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\bsp;..\lib;..\TimeOut;..
                    -\user) DEBUG OBJECTEXTEND PRINT(.\Listings\system.lst) OBJECT(.\Objects\system.obj)

line level    source

   1          #include "system.h"
   2          
   3          unsigned char Uart0SendFlag,Uart0ReceiveFlag;
   4          
   5          unsigned char Rev_Buf;
   6          
   7          TIMEOUT_PARA TimeOut_Para[2];
   8          
   9          void System_Init(void)
  10          {
  11   1         TimeOutDet_Init();
  12   1         Led_Init(); 
  13   1         LED1_SET(1);    
  14   1         Timer_Init();
  15   1         Uart_Init(); 
  16   1      }
  17          
  18          void Send_Byte(unsigned char DATA)
  19          {
  20   1          SSDAT = DATA;
  21   1          while(!(Uart0SendFlag));
  22   1          Uart0SendFlag = 0;
  23   1      }
  24          
  25          unsigned char Rev_Byte(void)
  26          {
  27   1         return SSDAT;    
  28   1      }
  29          
  30          
  31          void System_Handle(void)
  32          {
  33   1        static unsigned int Cnt; 
  34   1        if(0x77 == Rev_Byte())
  35   1        {
  36   2          LED1_SET(0);   
  37   2        }
  38   1        
  39   1        if(TimeOutDet_Check(&TimeOut_Para[0]))
  40   1        {
  41   2           TimeOut_Record(&TimeOut_Para[0],100);
  42   2           ++ Cnt;
  43   2           if(Cnt & 0x01)
  44   2           {
  45   3              //
  46   3              Send_Byte(0X55);     
  47   3           }
  48   2           else 
  49   2           {
  50   3              //;            
  51   3           }
  52   2        }
  53   1        
  54   1      }
C51 COMPILER V9.59.0.0   SYSTEM                                                            12/01/2018 16:13:00 PAGE 2   

  55          
  56          /**************************************************
  57          *函数名称：void timer0/1() interrupt 1/3
  58          *函数功能：定时器中断产生方波
  59          *入口参数：void
  60          *出口参数：void
  61          **************************************************/
  62          void timer0() interrupt 1
  63          {
  64   1          TL0 = (65536 - 1000)%256;    
  65   1              TH0 = (65536 - 1000)/256;
  66   1          TimeOutDet_DecHandle();
  67   1      }
  68          
  69          void timer1() interrupt 3
  70          {
  71   1          TL1 = (65536 - 24000)%256;
  72   1              TH1 = (65536 - 24000)/256;
  73   1              
  74   1      }
  75          
  76          void Timer2Int(void) interrupt 5
  77          {               
  78   1              TF2 = 0;   //溢出清零
  79   1          
  80   1      }
  81          
  82          /*****************************************************
  83          *函数名称：void UartInt(void) interrupt 4
  84          *函数功能：Uart0中断函数
  85          *入口参数：void
  86          *出口参数：void
  87          *****************************************************/
  88          void Bsp_Uart1IqrHandle() interrupt 7
  89          {
  90   1         if(SSCON0&0x02)
  91   1         {
  92   2              SSCON0&=0xFD;
  93   2              Uart0SendFlag = 1;
  94   2         }
  95   1              if((SSCON0&0x01)){
  96   2                      SSCON0&=0xFE;
  97   2              Uart0ReceiveFlag = 1;
  98   2          }
  99   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    188    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     21    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
